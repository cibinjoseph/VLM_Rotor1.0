<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="An unsteady vortex lattice solver written in Fortran">
    <meta name="author" content="Cibin Joseph" >
    <link rel="icon" href="../../favicon.png">

    <title>Tutorial 1: Suddenly started rectangular wing &ndash; VOLCANOR</title>

    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/pygments.css" rel="stylesheet">
    <link href="../../css/font-awesome.min.css" rel="stylesheet">
    <link href="../../css/local.css" rel="stylesheet">
      <link  href="../../tipuesearch/tipuesearch.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

         <script src="../../js/jquery-2.1.3.min.js"></script>
         <script src="../../js/svg-pan-zoom.min.js"></script>

  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../index.html">VOLCANOR <small>0.1.9</small></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
              <li><a href='../../page/index.html'>Documentation</a></li>
            <li class="dropdown hidden-xs visible-sm visible-md hidden-lg">
              <a href="#" class="dropdown-toggle"
                 data-toggle="dropdown" role="button"
                 aria-haspopup="true"
                 aria-expanded="false">
                 Contents <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                    <li><a href="../../lists/files.html">Source Files</a></li>
                  <li><a href="../../lists/modules.html">Modules</a></li>
                  <li><a href="../../lists/procedures.html">Procedures</a></li>
                  <li><a href="../../lists/types.html">Derived Types</a></li>
                  <li><a href="../../lists/programs.html">Programs</a></li>
              </ul>
            </li>
                <li class="visible-xs hidden-sm visible-lg">
                  <a href="../../lists/files.html">Source Files</a>
                </li>
              <li class="visible-xs hidden-sm visible-lg">
                <a href="../../lists/modules.html">Modules</a>
              </li>
              <li class="visible-xs hidden-sm visible-lg">
                <a href="../../lists/procedures.html">Procedures</a>
              </li>
              <li class="visible-xs hidden-sm visible-lg">
                <a href="../../lists/types.html">Derived Types</a>
              </li>
              <li class="visible-xs hidden-sm visible-lg">
                <a href="../../lists/programs.html">Programs</a>
              </li>
          </ul>
            <form action="../../search.html" class="navbar-form navbar-right" role="search">
              <div class="form-group">
                <input type="text" class="form-control" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
              </div>
              <!--
                  <button type="submit" class="btn btn-default">Submit</button>
                  -->
            </form>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
  <div class="row">
    <h1>Tutorial 1: Suddenly started rectangular wing</h1>
    <div class="row">
    <div class="col-lg-12">
    <div class="well well-sm" style="min-height: 40px;">
      <ul class="list-inline" style="margin-bottom:0px; display:inline">
<!--
-->
      </ul>
        <ol class="breadcrumb in-well">
         <li><a href='../../page/index.html'>Documentation</a></li>
         <li><a href='../../page/tutorials/index.html'>Tutorials</a></li>
         <li class="active">Tutorial 1: Suddenly started rectangular wing</li>
      </ol>
    </div>
    </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-9 col-md-push-3" id='text'>
      <p>Let's simulate a rectangular wing, suddenly started from rest into a constant freestream velocity. </p>
<h3>Case directory setup</h3>
<p>Use the <code>newcase.sh</code> script to generate a new 'case' directory with the name <code>simplewing.case</code> as described in <a href="index.html">Case directory setup</a>.</p>
<h3>Case setup</h3>
<p>The <code>config.nml</code> file sets up global parameters that control the whole simulation like number of timesteps, timestep length and fluid density. For this case, the default settings should work fine. The relevant section is shown below and the number of timesteps <code>nt</code> is set to be computed from the time required for the wing to traverse 10 chord lengths. The timestep length <code>dt</code> defaults to time taken for traversing a distance 1/16th of the chord length. Intervals at which solution plots and results should be written out may be controlled in sections below the <code>PARAMS</code> section.</p>
<div class="codehilite"><pre><span></span><code><span class="p">&amp;</span><span class="n">PARAMS</span><span class="w"></span>
<span class="c">! NO. OF TIMESTEPS [nt]    TIMESTEP (sec) [dt]         NO. OF ROTORS [nr]</span>
<span class="c">! [nt]timesteps  [0]default  [-nt]chords or revs</span>
<span class="n">nt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">10</span><span class="w"></span>
<span class="n">dt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"></span>
<span class="n">nr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="c">! DENSITY [kg/m3]    SOUND VEL. [m/s]  KINEMATICVISC [m2/s]</span>
<span class="n">density</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="w"></span>
<span class="n">velSound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">33</span><span class="mf">0.0</span><span class="w"></span>

<span class="n">kinematicVisc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.000018</span><span class="w"></span>
<span class="o">/</span><span class="w"></span>
</code></pre></div>

<p>Geometry required for each simulation is defined using the <code>geomXX.nml</code> files, where <code>XX</code> denotes a serial number. We shall simulate a wing of unit chord and aspect ratio 4. For the <code>geom01.nml</code> file, the relevant section is shown below. The parameter <code>theta0</code> represent the wing pitch angle and the nomenclature is borrowed from rotorcraft conventions. The freestream velocity is set to 10 m/s using the vector <code>velBody</code>. Note the axis conventions used here. The negative sign is present since we are setting the velocity of the geometry which is towards the negative direction in an inertial coordinate frame.</p>
<div class="codehilite"><pre><span></span><code><span class="p">&amp;</span><span class="n">GEOMPARAMS</span><span class="w"></span>
<span class="c">! Span[m]      root_cut[r/R]      chord[m]    preconeAngle[deg]</span>
<span class="n">span</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4.0</span><span class="w"></span>
<span class="n">rootcut</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"></span>
<span class="n">chord</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="w"></span>
<span class="n">preconeAngle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"></span>
<span class="c">! Omega[rad/s]   X-shaftAxis     Y-shaftAxis     Z-shaftAxis</span>
<span class="n">Omega</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"></span>
<span class="n">shaftAxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"></span>
<span class="c">! theta0[deg]    thetaC[deg]    thetaS[deg]    thetaTwist[deg]</span>
<span class="n">theta0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5.0</span><span class="w"></span>
<span class="n">thetaC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"></span>
<span class="n">thetaS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"></span>
<span class="n">thetaTwist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"></span>
<span class="c">! axisymmetrySwitch  [0]Off [1]On</span>
<span class="n">axisymmetrySwitch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="c">! pivot point     flapHinge      spanwiseLiftTerm    invert tauSpan</span>
<span class="c">! from LE[x/c]  from centre[r/R]    [1]enable     for swept/symmetric</span>
<span class="n">pivotLE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.00</span><span class="w"></span>
<span class="n">flapHinge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"></span>
<span class="n">spanwiseLiftSwitch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="n">symmetricTau</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="c">! customTrajectorySwitch  [0]Off [1]On</span>
<span class="n">customTrajectorySwitch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="c">! u[m/s]    v[m/s]     w[m/s]    p[rad/s]    q[rad/s]    r[rad/s]</span>
<span class="n">velBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"></span>
<span class="n">omegaBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"></span>
<span class="c">! forceCalcSwitch</span>
<span class="c">! [0]gamma [1]alpha [2]FELS             No. of airfoil files</span>
<span class="n">forceCalcSwitch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="n">nAirfoils</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="o">/</span><span class="w"></span>
</code></pre></div>

<p>The wing and wake discretization may be set in the <code>PANELS</code> section. Providing a large number of near wake rows using <code>nNwake</code> ensures that the wake surface is modelled with sufficient accuracy. <code>nc</code> and <code>ns</code> control the number of chordwise and spanwise panels on the wing. </p>
<div class="codehilite"><pre><span></span><code><span class="p">&amp;</span><span class="n">PANELS</span><span class="w"></span>
<span class="c">! No. of blades,nb  Prop convention [0]Helicopter [1]Prop</span>
<span class="n">nb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="n">propConvention</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="c">! Panel discretization [1]linear [2]cosine [3]halfsine [4]tan</span>
<span class="n">spanSpacing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="n">chordSpacing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="c">! degengeom geometryFile from OpenVSP</span>
<span class="n">geometryFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="n">nCamberFiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="c">! Chordwise panels,nc   Spanwise panels,ns</span>
<span class="n">nc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w"></span>
<span class="n">ns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">13</span><span class="w"></span>
<span class="c">! Near wake panels,nNwake [n]timesteps [-n]chords/revs</span>
<span class="n">nNwake</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">160</span><span class="w"></span>
<span class="o">/</span><span class="w"></span>
</code></pre></div>

<h3>Simulation</h3>
<p>To run the simulation we make use of the <code>Makefile</code> present in this case folder. Start the simulation using the <code>make</code> command. When the simulation is run, the current timestep is printed out on screen and a copy of the output is also written to <code>volcanor.log</code>.</p>
<p>During the simulation, basic monitors like force plots can be generated using the script provided in <code>tools/plotit.py</code>. For example, to monitor the force coefficient, use the <code>-f</code> flag.</p>
<div class="codehilite"><pre><span></span><code>./tools/plotit.py -f
</code></pre></div>

<p>We can plot the wakes during or after the simulation completes. Paraview is a powerful data visualization software that is recommended to postprocess results. Alternatives like <a href="https://www.tecplot.com/">Tecplot</a> or <a href="https://visit-dav.github.io/visit-website/index.html">VisIt</a> can also be used. Visualize the wake by opening the <code>r01wingNwakeXXXXX.tec</code> tecplot files generated by the solver in the <code>Results</code> directory.  </p>
<p><img src="paraview.png"  width="800"></p>
    </div>
    <div class="col-md-3 col-md-pull-9">
      <hr class="visible-xs visible-sm">
        <div class="well toc">
          <ul class="nav nav-stacked nav-pills">
            <li role="presentation" class="title"><a href='../../page/index.html'>Documentation</a></li>
          </ul>
          <hr>
          <ul class="nav nav-stacked nav-pills">
            <li role="presentation">
            <a href='../../page/tutorials/index.html'>Tutorials</a>
            <ul class="nav nav-stacked nav-pills">
                          <li role="presentation" class="disabled">
            <a href='../../page/tutorials/tutorial1.html'>Tutorial 1: Suddenly started rectangular wing</a>
            </li>

            </ul>
            </li>
          </ul>
        </div>
    </div>
  </div>
      <hr>
    </div> <!-- /container -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-xs-6 col-md-6"><p>VOLCANOR was developed by Cibin Joseph<br>&copy; 2023 
</p>
          </div>
          <div class="col-xs-6 col-md-6">
            <p class="text-right">
              Documentation generated by
              <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
 on 2023-07-04T21:23:30.213077             </p>
          </div>
        </div>
        <br>
      </div> <!-- /container -->
    </footer>

    <!-- Bootstrap core JavaScript
         ================================================== -->
         <!-- Placed at the end of the document so the pages load faster -->
    <!--
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        -->
        <script src="../../js/bootstrap.min.js"></script>
        <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
        <script src="../../js/ie10-viewport-bug-workaround.js"></script>

        <!-- MathJax JavaScript
             ================================================== -->
             <!-- Placed at the end of the document so the pages load faster -->
        <script type="text/x-mathjax-config">
          MathJax.Hub.Config({
          TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },
          jax: ['input/TeX','input/MathML','output/HTML-CSS'],
          extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']
          });
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

          <script src="../../tipuesearch/tipuesearch_content.js"></script>
          <script src="../../tipuesearch/tipuesearch_set.js"></script>
          <script src="../../tipuesearch/tipuesearch.js"></script>

  </body>
</html>