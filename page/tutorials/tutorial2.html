<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="An unsteady vortex lattice solver written in Fortran">
    <meta name="author" content="Cibin Joseph" >
    <link rel="icon" href="../../favicon.png">

    <title>Tutorial 2: Swept wing from NASA Technical Report 1208 &ndash; VOLCANOR</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="../../css/pygments.css" rel="stylesheet">
    <link href="../../css/font-awesome.min.css" rel="stylesheet">
    <link href="../../css/local.css" rel="stylesheet">
      <link  href="../../tipuesearch/tipuesearch.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha256-tG5mcZUtJsZvyKAxYLVXrmjKBVLd6VpVccqz/r4ypFE=" crossorigin="anonymous"></script>
  </head>

  <body>

    <!-- Fixed navbar -->
    <div class="container-fluid mb-sm-4 mb-xl-2">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <a class="navbar-brand" href="../../index.html">VOLCANOR <small>0.1.11</small></a>
          <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar"
                  aria-expanded="false" aria-controls="navbar" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon">
          </button>

          <div id="navbar" class="navbar-collapse collapse">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="../../page/index.html">Documentation</a></li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../lists/files.html">Source Files</a>
                  </li>
                <li class="nav-item">
                  <a class="nav-link" href="../../lists/modules.html">Modules</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../../lists/procedures.html">Procedures</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../../lists/types.html">Derived Types</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../../lists/namelists.html">Namelists</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../../lists/programs.html">Programs</a>
                </li>
            </ul>
              <div class="d-flex align-items-end flex-grow-1">
                <form action="../../search.html" role="search" class="ms-auto">
                  <input type="text" class="form-control" aria-label="Search" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
                </form>
              </div>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
    </div>

    <div class="container">
  <div class="row">
    <h1>Tutorial 2: Swept wing from NASA Technical Report 1208</h1>
    <div class="container p-2 mb-4 bg-light border rounded-3">
      <div class="row align-items-center justify-content-between">
        <div class="col">
          <ul class="list-inline" style="margin-bottom:0px; display:inline">
          </ul>
        </div>
        <div class="col">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb justify-content-end mb-0">
                <li class="breadcrumb-item"><a href='../../page/index.html'>Documentation</a></li>
                <li class="breadcrumb-item"><a href='../../page/tutorials/index.html'>Tutorials</a></li>
              <li class="breadcrumb-item active" aria-current="page">Tutorial 2: Swept wing from NASA Technical Report 1208</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
      <div class="col-3">
        <div class="card card-body bg-light" id="sidebar-toc">
          <ul class="nav flex-column align-items">
            <li class="nav-item">
              <a class="nav-link" href="../../page/index.html">Documentation</a>
            </li>
          </ul>
          <hr>
          <nav class="nav nav-pills flex-column">
              <a class="nav-link" href="../../page/tutorials/index.html">Tutorials</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../../page/tutorials/tutorial1.html">Tutorial 1: Suddenly started rectangular wing</a>
              <a class="nav-link active disabled" href="../../page/tutorials/tutorial2.html">Tutorial 2: Swept wing from NASA Technical Report 1208</a>

                </nav>
          </nav>
        </div>
      </div>

    <div class="col-9" id='text'>
      <p>For this tutorial we'll create a geometry using <a href="https://openvsp.org/">OpenVSP</a> and use that to validate a tapered swept wing test case from NASA TR-1208.</p>
<h3>Geometry details</h3>
<p>The dimensions of the wing are provided in the table below.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>span</td>
<td>127.26</td>
<td>in</td>
</tr>
<tr>
<td>root chord</td>
<td>21.94</td>
<td>in</td>
</tr>
<tr>
<td>tip chord</td>
<td>9.87</td>
<td>in</td>
</tr>
<tr>
<td>mean aerod. chord</td>
<td>16.67</td>
<td>in</td>
</tr>
<tr>
<td>sweep</td>
<td>45</td>
<td>deg</td>
</tr>
<tr>
<td>airfoil</td>
<td>NACA 63A012</td>
<td></td>
</tr>
</tbody>
</table>
<p>Once the wing is created in OpenVSP, save it as a DegenGeom matlab file using Analysis &gt; DegenGeom. This saves a matlab script that contains the camber geometry which VOLCANOR requires. The matlab script can then be converted to a Plot3D mesh file using the helper script <code>degen2plot3d.m</code> in the <code>tools</code> folder in the VOLCANOR repo. This Plot3D file can be provided to VOLCANOR through the <code>geometryFile</code> field in the <code>geomXX.nml</code> input file.</p>
<div class="codehilite"><pre><span></span><code><span class="c">% This writes out a Plot3D file with the extension .xyz</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">degen2plot3d</span><span class="p">(</span><span class="s">&quot;TR1208_DegenGeom.m&quot;</span><span class="p">);</span>
<span class="c">% Creates TR1208_DegenGeom.xyz</span>
</code></pre></div>

<p>Once the PLOT3D file is created, we can move on to setting up the case in VOLCANOR. The PLOT3D file was renamed to <code>TR1208.xyz</code> for ease of use. Note that the number of panels in the chordwise and spanwise directions used while creating the geometry in OpenVSP cannot be changed.</p>
<h3>Case directory setup</h3>
<p>Use the <code>newcase.sh</code> script to generate a new 'case' directory with the name <code>simplewing.case</code> as described in <a href="index.html">Case directory setup</a>.</p>
<h3>Case setup</h3>
<p>The <code>config.nml</code> file sets up global parameters that control the whole simulation like number of timesteps, timestep length and fluid density. For this case, the default settings should work fine. The relevant section is shown below and the number of timesteps <code>nt</code> is set to be computed from the time required for the wing to traverse 20 chord lengths. The timestep length <code>dt</code> defaults to time taken for traversing a distance 1/16th of the chord length. Intervals at which solution plots and results should be written out may be controlled in sections below the <code>PARAMS</code> section.</p>
<div class="codehilite"><pre><span></span><code><span class="p">&amp;</span><span class="n">PARAMS</span>
<span class="c">! NO. OF TIMESTEPS [nt]    TIMESTEP (sec) [dt]         NO. OF ROTORS [nr]</span>
<span class="c">! [nt]timesteps  [0]default  [-nt]chords or revs</span>
<span class="n">nt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">20</span>
<span class="n">dt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span>
<span class="n">nr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="c">! DENSITY [kg/m3]    SOUND VEL. [m/s]  KINEMATICVISC [m2/s]</span>
<span class="n">density</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span>
<span class="n">velSound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">33</span><span class="mf">0.0</span>
<span class="n">kinematicVisc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.000018</span>
<span class="o">/</span>
</code></pre></div>

<p>Geometry required for each simulation is defined using the <code>geomXX.nml</code> files, where <code>XX</code> denotes a serial number. For the <code>geom01.nml</code> file, the relevant section is shown below. The parameter <code>theta0</code> represent the wing pitch angle and the nomenclature is borrowed from rotorcraft conventions. The freestream velocity is set to an arbitrary 300 in/s using the vector <code>velBody</code>. Note the axis conventions used here. The negative sign is present since we are setting the velocity of the geometry which is towards the negative direction in an inertial coordinate frame. The chord is set to the mean aerodynamic chord in inches.</p>
<div class="codehilite"><pre><span></span><code><span class="p">&amp;</span><span class="n">GEOMPARAMS</span>
<span class="c">! Span[m]      root_cut[r/R]      chord[m]    preconeAngle[deg]</span>
<span class="n">span</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="mf">7.26</span>
<span class="n">rootcut</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span>
<span class="n">chord</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="mf">6.672</span>
<span class="n">preconeAngle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span>
<span class="c">! Omega[rad/s]   X-shaftAxis     Y-shaftAxis     Z-shaftAxis</span>
<span class="n">Omega</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span>
<span class="n">shaftAxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span>
<span class="c">! theta0[deg]    thetaC[deg]    thetaS[deg]    thetaTwist[deg]</span>
<span class="n">theta0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4.7</span>
<span class="n">thetaC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span>
<span class="n">thetaS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span>
<span class="n">thetaTwist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span>
<span class="c">! axisymmetrySwitch  [0]Off [1]On</span>
<span class="n">axisymmetrySwitch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="c">! pivot point     flapHinge      spanwiseLiftTerm    invert tauSpan</span>
<span class="c">! from LE[x/c]  from centre[r/R]    [1]enable     for swept/symmetric</span>
<span class="n">pivotLE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.00</span>
<span class="n">flapHinge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span>
<span class="n">spanwiseLiftSwitch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="n">symmetricTau</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="c">! customTrajectorySwitch  [0]Off [1]On</span>
<span class="n">customTrajectorySwitch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="c">! u[m/s]    v[m/s]     w[m/s]    p[rad/s]    q[rad/s]    r[rad/s]</span>
<span class="n">velBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">30</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span>
<span class="n">omegaBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span>
<span class="c">! forceCalcSwitch</span>
<span class="c">! [0]gamma [1]alpha [2]FELS             No. of airfoil files</span>
<span class="n">forceCalcSwitch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="n">nAirfoils</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="o">/</span>
</code></pre></div>

<p>The wing and wake discretization may be set in the <code>PANELS</code> section. Providing a large number of near wake rows using <code>nNwake</code> ensures that the wake surface is modelled with sufficient accuracy. <code>nc</code> and <code>ns</code> control the number of chordwise and spanwise panels on the wing. Ensure that <code>nc</code> and <code>ns</code> are one less than the number of points provided in the PLOT3D file header.</p>
<div class="codehilite"><pre><span></span><code><span class="p">&amp;</span><span class="n">PANELS</span>
<span class="c">! No. of blades,nb  Prop convention [0]Helicopter [1]Prop</span>
<span class="n">nb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="n">propConvention</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="c">! Panel discretization [1]linear [2]cosine [3]halfsine [4]tan</span>
<span class="n">spanSpacing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span>
<span class="n">chordSpacing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="c">! degengeom geometryFile from OpenVSP</span>
<span class="n">geometryFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="n">nCamberFiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="c">! Chordwise panels,nc   Spanwise panels,ns</span>
<span class="n">nc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>
<span class="n">ns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">34</span>
<span class="c">! Near wake panels,nNwake [n]timesteps [-n]chords/revs</span>
<span class="n">nNwake</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">350</span>
<span class="o">/</span>
</code></pre></div>

<h3>Simulation</h3>
<p>To run the simulation we make use of the <code>Makefile</code> present in this case folder. Start the simulation using the <code>make</code> command. When the simulation is run, the current timestep is printed out on screen and a copy of the output is also written to <code>volcanor.log</code>.</p>
<p>During the simulation, basic monitors like force plots can be generated using the script provided in <code>tools/plotit.py</code>. For example, to monitor the force coefficient, use the <code>-f</code> flag.</p>
<div class="codehilite"><pre><span></span><code>./tools/plotit.py<span class="w"> </span>-f
</code></pre></div>

<p>We can plot the wakes during or after the simulation completes. <a href="https://www.paraview.org/">Paraview</a> is a powerful data visualization software that is recommended to postprocess results. Alternatives like <a href="https://www.tecplot.com/">Tecplot</a> or <a href="https://visit-dav.github.io/visit-website/index.html">VisIt</a> can also be used. Visualize the wake by opening the <code>r01wingNwakeXXXXX.tec</code> tecplot files generated by the solver in the <code>Results</code> directory.  </p>
<p>Such a visualization using Paraview is shown below.
<img src="tr1208.png"  width="800"></p>
<p>The net lift coefficient can be extracted from <code>Results/r01ForceNonDim.csv</code> and the sectional parameters and force distribution can be obtained from <code>Results/r01b01ForceDist00200.csv</code> where <code>r01</code> denotes the Rotor or Geometry 1 and <code>b01</code> denotes Blade 1 and <code>00200</code> is the iteration number.</p>
<p>A basic validation example is shown below from the reference provided in the <a href="../index.html">Documentation</a> page.</p>
<table>
<thead>
<tr>
<th></th>
<th>Experiment</th>
<th>VOLCANOR</th>
<th>Error %</th>
</tr>
</thead>
<tbody>
<tr>
<td>Lift at <script type="math/tex">2.0^\circ</script>
</td>
<td>0.142</td>
<td>0.125</td>
<td>3.7 %</td>
</tr>
<tr>
<td>Lift at <script type="math/tex">4.7^\circ</script>
</td>
<td>0.312</td>
<td>0.292</td>
<td>6.4 %</td>
</tr>
<tr>
<td>Lift at <script type="math/tex">8.0^\circ</script>
</td>
<td>0.500</td>
<td>0.491</td>
<td>1.8 %</td>
</tr>
</tbody>
</table>
<p><img src="tr1208-validation.png" width="800"></p>
    </div>
  </div>
      <hr>
    </div> <!-- /container -->
    <footer>
      <div class="container">
        <div class="row justify-content-between">
          <div class="col"><p>VOLCANOR was developed by Cibin Joseph<br>&copy; 2023 
</p>
          </div>
          <div class="col">
            <p class="text-end">
              Documentation generated by
              <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
 on 2023-12-21T03:30:31.187573             </p>
          </div>
        </div>
        <br>
      </div> <!-- /container -->
    </footer>

    <!-- Bootstrap core JavaScript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>    

    <!-- MathJax JavaScript
             ================================================== -->
             <!-- Placed at the end of the document so the pages load faster -->
        <script type="text/x-mathjax-config">
          MathJax.Hub.Config({
          TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },
          jax: ['input/TeX','input/MathML','output/HTML-CSS'],
          extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']
          });
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

          <script src="../../tipuesearch/tipuesearch_content.js"></script>
          <script src="../../tipuesearch/tipuesearch_set.js"></script>
          <script src="../../tipuesearch/tipuesearch.js"></script>

  </body>
</html>